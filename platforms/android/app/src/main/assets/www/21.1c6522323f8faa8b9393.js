(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{R3xw:function(l,n,e){"use strict";e.r(n);var u=e("CcnG"),t=e("mrSG"),o=e("ZZ/e"),a=e("cdBk"),i=e("N+K7"),r=e("ej43"),s=function(){function l(l,n,e,u,t,o){this.alertController=l,this.imagePicker=n,this.httpService=e,this.toastController=u,this.authService=t,this.storage=o,this.userData=[],this.valid=!0,this.valido=!0}return l.prototype.ngOnInit=function(){},l.prototype.showAlert=function(){return t.b(this,void 0,void 0,function(){return t.e(this,function(l){switch(l.label){case 0:return[4,this.alertController.create({header:"Ayuda",message:"Para darte de alta en la app dale tu email a Pablo Scouter.",buttons:["OK"]})];case 1:return[4,l.sent().present()];case 2:return l.sent(),[2]}})})},l.prototype.getImage=function(){var l=this;this.options={width:200,quality:25,outputType:1},this.imageResponse=[],this.imagePicker.getPictures(this.options).then(function(n){for(var e=0;e<n.length;e++)l.imageResponse.push("data:image/jpeg;base64,"+n[e])},function(l){alert(l)})},l.prototype.register=function(){var l=this;if(this.password!=this.password2)this.errorMsg="Las contrasenyas no coinciden.";else{this.userData.push(this.nickname,this.password,this.email,this.name,this.surname);var n=0;this.userData.forEach(function(e){l.validate(n,e),n++}),this.valid&&this.httpService.getEmail(this.email).then(function(n){205!=n.status?(l.userData.push(n.valid_email[0].role),l.httpService.getUserByEmail(l.userData[2]).then(function(n){n.user[0].email!==l.userData[2]?l.httpService.postUser(l.userData).then(function(){l.authService.login(l.userData[0],l.password).then(function(){l.storage.set("first-ref",!1)}),l.errorMsg="Usuario registrado."}):l.errorMsg="Ese email ya esta en uso."}),l.httpService.getUser(l.userData[0]).then(function(n){n.user[0].login!==l.userData[0]?l.httpService.postUser(l.userData).then(function(){l.authService.login(l.userData[0],l.password).then(function(){l.storage.set("first-ref",!1)}),l.errorMsg="Usuario registrado."}):l.errorMsg="Ese nickname ya esta en uso."})):l.errorMsg="El email no figura en la base de datos. Por favor contacte con Pablo Scouter.",401==n.status&&(l.errorMsg="El nickname o el email ya existen.")}).catch(function(){l.errorMsg="El email no figura en la base de datos. Por favor contacte con Pablo Scouter."})}this.presentToast(),this.errorMsg="Usuario registrado."},l.prototype.validate=function(l,n){var e=this;if(void 0===n)this.errorMsg="Rellene los campos obligatorios",this.valid=!1;else switch(l){case 0:n.length<4&&(this.errorMsg="El nickname no puede tener menos de 4 caracteres.",this.valid=!1);break;case 1:n.length<6&&(this.errorMsg="La contrasenya debe tener al menos 6 caracteres.",this.valid=!1);break;case 2:this.httpService.getEmail(n).catch(function(){e.errorMsg="El email no figura en la base de datos. Por favor contacte con Pablo Scouter.",e.valid=!1});break;case 3:n.length<1&&(this.errorMsg="El nombre no puede ser vacio.",this.valid=!1);break;case 4:n.length<1&&(this.errorMsg="El apellido no puede ser vacio.",this.valid=!1)}},l.prototype.checkEmails=function(l){return t.b(this,void 0,void 0,function(){var n=this;return t.e(this,function(e){switch(e.label){case 0:return[4,this.httpService.getUsers().then(function(e){console.log(e),e.user.forEach(function(e){e.email==l&&(n.valido=!1)})})];case 1:return e.sent(),console.log(this.valido+" vALIDO"),[2,this.valido]}})})},l.prototype.presentToast=function(){return t.b(this,void 0,void 0,function(){return t.e(this,function(l){switch(l.label){case 0:return[4,this.toastController.create({message:this.errorMsg,duration:2e3})];case 1:return l.sent().present(),[2]}})})},l}(),b=function(){return function(){}}(),c=e("pMnS"),g=e("oBZk"),d=e("gIcY"),h=e("iw74"),p=u.nb({encapsulation:0,styles:[[".circle-pic[_ngcontent-%COMP%]{width:100px;height:100px;margin-left:auto;margin-right:auto;border-radius:50%}.button-no-background[_ngcontent-%COMP%]{color:#00f;padding:0;border:none;background:0 0;margin-left:auto;margin-right:auto}.label[_ngcontent-%COMP%]{font-size:15px;margin-bottom:-15px}.selector[_ngcontent-%COMP%]{max-width:100%!important}"]],data:{}});function m(l){return u.Gb(0,[(l()(),u.pb(0,0,null,null,17,"ion-header",[],null,null,null,g.Z,g.q)),u.ob(1,49152,null,0,o.A,[u.h,u.k],null,null),(l()(),u.pb(2,0,null,0,15,"ion-toolbar",[],null,null,null,g.rb,g.I)),u.ob(3,49152,null,0,o.Ab,[u.h,u.k],null,null),(l()(),u.pb(4,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,g.N,g.e)),u.ob(5,49152,null,0,o.k,[u.h,u.k],null,null),(l()(),u.pb(6,0,null,0,2,"ion-back-button",[["defaultHref","/login"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==u.yb(l,8).onClick(e)&&t),t},g.L,g.c)),u.ob(7,49152,null,0,o.f,[u.h,u.k],{defaultHref:[0,"defaultHref"]},null),u.ob(8,16384,null,0,o.g,[[2,o.gb],o.Fb],{defaultHref:[0,"defaultHref"]},null),(l()(),u.pb(9,0,null,0,5,"ion-buttons",[["slot","end"]],null,null,null,g.N,g.e)),u.ob(10,49152,null,0,o.k,[u.h,u.k],null,null),(l()(),u.pb(11,0,null,0,3,"ion-button",[],null,[[null,"click"]],function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.showAlert()&&u),u},g.M,g.d)),u.ob(12,49152,null,0,o.j,[u.h,u.k],null,null),(l()(),u.pb(13,0,null,0,1,"ion-icon",[["name","help-circle-outline"]],null,null,null,g.ab,g.r)),u.ob(14,49152,null,0,o.B,[u.h,u.k],{name:[0,"name"]},null),(l()(),u.pb(15,0,null,0,2,"ion-title",[],null,null,null,g.qb,g.H)),u.ob(16,49152,null,0,o.yb,[u.h,u.k],null,null),(l()(),u.Eb(-1,0,["Registro"])),(l()(),u.pb(18,0,null,null,96,"ion-content",[["padding",""]],null,null,null,g.U,g.l)),u.ob(19,49152,null,0,o.t,[u.h,u.k],null,null),(l()(),u.pb(20,0,null,0,2,"ion-item",[["class","user-head"],["lines","none"]],null,null,null,g.cb,g.t)),u.ob(21,49152,null,0,o.G,[u.h,u.k],{lines:[0,"lines"]},null),(l()(),u.pb(22,0,null,0,0,"img",[["class","circle-pic"],["src","../../../assets/avatar.png"]],null,null,null,null,null)),(l()(),u.pb(23,0,null,0,4,"ion-item",[["lines","none"],["style","margin-left: auto;margin-right: auto;"]],null,null,null,g.cb,g.t)),u.ob(24,49152,null,0,o.G,[u.h,u.k],{lines:[0,"lines"]},null),(l()(),u.pb(25,0,null,0,2,"ion-button",[["block",""],["class","button-no-background"],["clear",""],["color","transparent"]],null,[[null,"click"]],function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.getImage()&&u),u},g.M,g.d)),u.ob(26,49152,null,0,o.j,[u.h,u.k],{color:[0,"color"]},null),(l()(),u.Eb(-1,0,["Cambiar avatar"])),(l()(),u.pb(28,0,null,0,4,"ion-item",[["lines","none"]],null,null,null,g.cb,g.t)),u.ob(29,49152,null,0,o.G,[u.h,u.k],{lines:[0,"lines"]},null),(l()(),u.pb(30,0,null,0,2,"ion-label",[["class","label"]],null,null,null,g.db,g.u)),u.ob(31,49152,null,0,o.M,[u.h,u.k],null,null),(l()(),u.Eb(-1,0,["Nickname*"])),(l()(),u.pb(33,0,null,0,8,"ion-item",[],null,null,null,g.cb,g.t)),u.ob(34,49152,null,0,o.G,[u.h,u.k],null,null),(l()(),u.pb(35,0,null,0,6,"ion-input",[["placeholder","Nickname*"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],function(l,n,e){var t=!0,o=l.component;return"ionBlur"===n&&(t=!1!==u.yb(l,36)._handleBlurEvent()&&t),"ionChange"===n&&(t=!1!==u.yb(l,36)._handleInputEvent(e.target.value)&&t),"ngModelChange"===n&&(t=!1!==(o.nickname=e)&&t),t},g.bb,g.s)),u.ob(36,16384,null,0,o.Lb,[u.k],null,null),u.Bb(1024,null,d.d,function(l){return[l]},[o.Lb]),u.ob(38,671744,null,0,d.g,[[8,null],[8,null],[8,null],[6,d.d]],{model:[0,"model"]},{update:"ngModelChange"}),u.Bb(2048,null,d.e,null,[d.g]),u.ob(40,16384,null,0,d.f,[[4,d.e]],null,null),u.ob(41,49152,null,0,o.F,[u.h,u.k],{placeholder:[0,"placeholder"]},null),(l()(),u.pb(42,0,null,0,4,"ion-item",[["lines","none"]],null,null,null,g.cb,g.t)),u.ob(43,49152,null,0,o.G,[u.h,u.k],{lines:[0,"lines"]},null),(l()(),u.pb(44,0,null,0,2,"ion-label",[["class","label"]],null,null,null,g.db,g.u)),u.ob(45,49152,null,0,o.M,[u.h,u.k],null,null),(l()(),u.Eb(-1,0,["Contrase\xf1a*"])),(l()(),u.pb(47,0,null,0,8,"ion-item",[],null,null,null,g.cb,g.t)),u.ob(48,49152,null,0,o.G,[u.h,u.k],null,null),(l()(),u.pb(49,0,null,0,6,"ion-input",[["placeholder","Contrase\xf1a (6 caracteres min.)*"],["type","password"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],function(l,n,e){var t=!0,o=l.component;return"ionBlur"===n&&(t=!1!==u.yb(l,50)._handleBlurEvent()&&t),"ionChange"===n&&(t=!1!==u.yb(l,50)._handleInputEvent(e.target.value)&&t),"ngModelChange"===n&&(t=!1!==(o.password=e)&&t),t},g.bb,g.s)),u.ob(50,16384,null,0,o.Lb,[u.k],null,null),u.Bb(1024,null,d.d,function(l){return[l]},[o.Lb]),u.ob(52,671744,null,0,d.g,[[8,null],[8,null],[8,null],[6,d.d]],{model:[0,"model"]},{update:"ngModelChange"}),u.Bb(2048,null,d.e,null,[d.g]),u.ob(54,16384,null,0,d.f,[[4,d.e]],null,null),u.ob(55,49152,null,0,o.F,[u.h,u.k],{placeholder:[0,"placeholder"],type:[1,"type"]},null),(l()(),u.pb(56,0,null,0,4,"ion-item",[["lines","none"]],null,null,null,g.cb,g.t)),u.ob(57,49152,null,0,o.G,[u.h,u.k],{lines:[0,"lines"]},null),(l()(),u.pb(58,0,null,0,2,"ion-label",[["class","label"]],null,null,null,g.db,g.u)),u.ob(59,49152,null,0,o.M,[u.h,u.k],null,null),(l()(),u.Eb(-1,0,["Repite la contrase\xf1a*"])),(l()(),u.pb(61,0,null,0,8,"ion-item",[],null,null,null,g.cb,g.t)),u.ob(62,49152,null,0,o.G,[u.h,u.k],null,null),(l()(),u.pb(63,0,null,0,6,"ion-input",[["placeholder","Repite la contrase\xf1a*"],["type","password"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],function(l,n,e){var t=!0,o=l.component;return"ionBlur"===n&&(t=!1!==u.yb(l,64)._handleBlurEvent()&&t),"ionChange"===n&&(t=!1!==u.yb(l,64)._handleInputEvent(e.target.value)&&t),"ngModelChange"===n&&(t=!1!==(o.password2=e)&&t),t},g.bb,g.s)),u.ob(64,16384,null,0,o.Lb,[u.k],null,null),u.Bb(1024,null,d.d,function(l){return[l]},[o.Lb]),u.ob(66,671744,null,0,d.g,[[8,null],[8,null],[8,null],[6,d.d]],{model:[0,"model"]},{update:"ngModelChange"}),u.Bb(2048,null,d.e,null,[d.g]),u.ob(68,16384,null,0,d.f,[[4,d.e]],null,null),u.ob(69,49152,null,0,o.F,[u.h,u.k],{placeholder:[0,"placeholder"],type:[1,"type"]},null),(l()(),u.pb(70,0,null,0,4,"ion-item",[["lines","none"]],null,null,null,g.cb,g.t)),u.ob(71,49152,null,0,o.G,[u.h,u.k],{lines:[0,"lines"]},null),(l()(),u.pb(72,0,null,0,2,"ion-label",[["class","label"]],null,null,null,g.db,g.u)),u.ob(73,49152,null,0,o.M,[u.h,u.k],null,null),(l()(),u.Eb(-1,0,["Email*"])),(l()(),u.pb(75,0,null,0,8,"ion-item",[],null,null,null,g.cb,g.t)),u.ob(76,49152,null,0,o.G,[u.h,u.k],null,null),(l()(),u.pb(77,0,null,0,6,"ion-input",[["placeholder","Email validado*"],["type","email"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],function(l,n,e){var t=!0,o=l.component;return"ionBlur"===n&&(t=!1!==u.yb(l,78)._handleBlurEvent()&&t),"ionChange"===n&&(t=!1!==u.yb(l,78)._handleInputEvent(e.target.value)&&t),"ngModelChange"===n&&(t=!1!==(o.email=e)&&t),t},g.bb,g.s)),u.ob(78,16384,null,0,o.Lb,[u.k],null,null),u.Bb(1024,null,d.d,function(l){return[l]},[o.Lb]),u.ob(80,671744,null,0,d.g,[[8,null],[8,null],[8,null],[6,d.d]],{model:[0,"model"]},{update:"ngModelChange"}),u.Bb(2048,null,d.e,null,[d.g]),u.ob(82,16384,null,0,d.f,[[4,d.e]],null,null),u.ob(83,49152,null,0,o.F,[u.h,u.k],{placeholder:[0,"placeholder"],type:[1,"type"]},null),(l()(),u.pb(84,0,null,0,4,"ion-item",[["lines","none"]],null,null,null,g.cb,g.t)),u.ob(85,49152,null,0,o.G,[u.h,u.k],{lines:[0,"lines"]},null),(l()(),u.pb(86,0,null,0,2,"ion-label",[["class","label"]],null,null,null,g.db,g.u)),u.ob(87,49152,null,0,o.M,[u.h,u.k],null,null),(l()(),u.Eb(-1,0,["Nombre*"])),(l()(),u.pb(89,0,null,0,8,"ion-item",[],null,null,null,g.cb,g.t)),u.ob(90,49152,null,0,o.G,[u.h,u.k],null,null),(l()(),u.pb(91,0,null,0,6,"ion-input",[["placeholder","Nombre*"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],function(l,n,e){var t=!0,o=l.component;return"ionBlur"===n&&(t=!1!==u.yb(l,92)._handleBlurEvent()&&t),"ionChange"===n&&(t=!1!==u.yb(l,92)._handleInputEvent(e.target.value)&&t),"ngModelChange"===n&&(t=!1!==(o.name=e)&&t),t},g.bb,g.s)),u.ob(92,16384,null,0,o.Lb,[u.k],null,null),u.Bb(1024,null,d.d,function(l){return[l]},[o.Lb]),u.ob(94,671744,null,0,d.g,[[8,null],[8,null],[8,null],[6,d.d]],{model:[0,"model"]},{update:"ngModelChange"}),u.Bb(2048,null,d.e,null,[d.g]),u.ob(96,16384,null,0,d.f,[[4,d.e]],null,null),u.ob(97,49152,null,0,o.F,[u.h,u.k],{placeholder:[0,"placeholder"]},null),(l()(),u.pb(98,0,null,0,4,"ion-item",[["lines","none"]],null,null,null,g.cb,g.t)),u.ob(99,49152,null,0,o.G,[u.h,u.k],{lines:[0,"lines"]},null),(l()(),u.pb(100,0,null,0,2,"ion-label",[["class","label"]],null,null,null,g.db,g.u)),u.ob(101,49152,null,0,o.M,[u.h,u.k],null,null),(l()(),u.Eb(-1,0,["Apellidos*"])),(l()(),u.pb(103,0,null,0,8,"ion-item",[],null,null,null,g.cb,g.t)),u.ob(104,49152,null,0,o.G,[u.h,u.k],null,null),(l()(),u.pb(105,0,null,0,6,"ion-input",[["placeholder","Apellidos*"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],function(l,n,e){var t=!0,o=l.component;return"ionBlur"===n&&(t=!1!==u.yb(l,106)._handleBlurEvent()&&t),"ionChange"===n&&(t=!1!==u.yb(l,106)._handleInputEvent(e.target.value)&&t),"ngModelChange"===n&&(t=!1!==(o.surname=e)&&t),t},g.bb,g.s)),u.ob(106,16384,null,0,o.Lb,[u.k],null,null),u.Bb(1024,null,d.d,function(l){return[l]},[o.Lb]),u.ob(108,671744,null,0,d.g,[[8,null],[8,null],[8,null],[6,d.d]],{model:[0,"model"]},{update:"ngModelChange"}),u.Bb(2048,null,d.e,null,[d.g]),u.ob(110,16384,null,0,d.f,[[4,d.e]],null,null),u.ob(111,49152,null,0,o.F,[u.h,u.k],{placeholder:[0,"placeholder"]},null),(l()(),u.pb(112,0,null,0,2,"ion-button",[["expand","block"],["style","margin-top: 20px;"]],null,[[null,"click"]],function(l,n,e){var u=!0;return"click"===n&&(u=!1!==l.component.register()&&u),u},g.M,g.d)),u.ob(113,49152,null,0,o.j,[u.h,u.k],{expand:[0,"expand"]},null),(l()(),u.Eb(-1,0,["Registro"]))],function(l,n){var e=n.component;l(n,7,0,"/login"),l(n,8,0,"/login"),l(n,14,0,"help-circle-outline"),l(n,21,0,"none"),l(n,24,0,"none"),l(n,26,0,"transparent"),l(n,29,0,"none"),l(n,38,0,e.nickname),l(n,41,0,"Nickname*"),l(n,43,0,"none"),l(n,52,0,e.password),l(n,55,0,"Contrase\xf1a (6 caracteres min.)*","password"),l(n,57,0,"none"),l(n,66,0,e.password2),l(n,69,0,"Repite la contrase\xf1a*","password"),l(n,71,0,"none"),l(n,80,0,e.email),l(n,83,0,"Email validado*","email"),l(n,85,0,"none"),l(n,94,0,e.name),l(n,97,0,"Nombre*"),l(n,99,0,"none"),l(n,108,0,e.surname),l(n,111,0,"Apellidos*"),l(n,113,0,"block")},function(l,n){l(n,35,0,u.yb(n,40).ngClassUntouched,u.yb(n,40).ngClassTouched,u.yb(n,40).ngClassPristine,u.yb(n,40).ngClassDirty,u.yb(n,40).ngClassValid,u.yb(n,40).ngClassInvalid,u.yb(n,40).ngClassPending),l(n,49,0,u.yb(n,54).ngClassUntouched,u.yb(n,54).ngClassTouched,u.yb(n,54).ngClassPristine,u.yb(n,54).ngClassDirty,u.yb(n,54).ngClassValid,u.yb(n,54).ngClassInvalid,u.yb(n,54).ngClassPending),l(n,63,0,u.yb(n,68).ngClassUntouched,u.yb(n,68).ngClassTouched,u.yb(n,68).ngClassPristine,u.yb(n,68).ngClassDirty,u.yb(n,68).ngClassValid,u.yb(n,68).ngClassInvalid,u.yb(n,68).ngClassPending),l(n,77,0,u.yb(n,82).ngClassUntouched,u.yb(n,82).ngClassTouched,u.yb(n,82).ngClassPristine,u.yb(n,82).ngClassDirty,u.yb(n,82).ngClassValid,u.yb(n,82).ngClassInvalid,u.yb(n,82).ngClassPending),l(n,91,0,u.yb(n,96).ngClassUntouched,u.yb(n,96).ngClassTouched,u.yb(n,96).ngClassPristine,u.yb(n,96).ngClassDirty,u.yb(n,96).ngClassValid,u.yb(n,96).ngClassInvalid,u.yb(n,96).ngClassPending),l(n,105,0,u.yb(n,110).ngClassUntouched,u.yb(n,110).ngClassTouched,u.yb(n,110).ngClassPristine,u.yb(n,110).ngClassDirty,u.yb(n,110).ngClassValid,u.yb(n,110).ngClassInvalid,u.yb(n,110).ngClassPending)})}function v(l){return u.Gb(0,[(l()(),u.pb(0,0,null,null,1,"app-register",[],null,null,null,m,p)),u.ob(1,114688,null,0,s,[o.a,a.a,i.a,o.Mb,r.a,h.b],null,null)],function(l,n){l(n,1,0)},null)}var y=u.lb("app-register",s,v,{},{},[]),f=e("Ip0R"),C=e("ZYCi");e.d(n,"RegisterPageModuleNgFactory",function(){return k});var k=u.mb(b,[],function(l){return u.vb([u.wb(512,u.j,u.bb,[[8,[c.a,y]],[3,u.j],u.x]),u.wb(4608,f.k,f.j,[u.u,[2,f.q]]),u.wb(4608,d.i,d.i,[]),u.wb(4608,o.b,o.b,[u.z,u.g]),u.wb(4608,o.Eb,o.Eb,[o.b,u.j,u.q,f.c]),u.wb(4608,o.Hb,o.Hb,[o.b,u.j,u.q,f.c]),u.wb(1073742336,f.b,f.b,[]),u.wb(1073742336,d.h,d.h,[]),u.wb(1073742336,d.a,d.a,[]),u.wb(1073742336,o.Cb,o.Cb,[]),u.wb(1073742336,C.o,C.o,[[2,C.u],[2,C.m]]),u.wb(1073742336,b,b,[]),u.wb(1024,C.k,function(){return[[{path:"",component:s}]]},[])])})}}]);